(this["webpackJsonplearn-auth"]=this["webpackJsonplearn-auth"]||[]).push([[0],{186:function(e,t,a){e.exports=a(334)},191:function(e,t,a){},212:function(e,t,a){},216:function(e,t){},218:function(e,t){},232:function(e,t){},234:function(e,t){},262:function(e,t){},263:function(e,t){},268:function(e,t){},270:function(e,t){},294:function(e,t){},334:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),l=(a(191),a(13)),s=a.n(l),m=a(27),u=a(14),i=a(72),d=a.n(i),p=function(e){if("undefined"!==window)return d.a.get(e)},b=function(e,t){var a,n;console.log("AUTHENTICATE HELPER ON SIGNIN RESPONSE",e),a="token",n=e.data.token,"undefined"!==window&&d.a.set(a,n,{expires:1}),function(e,t){"undefined"!==window&&localStorage.setItem(e,JSON.stringify(t))}("user",e.data.user),t()},E=function(){if("undefined"!==window)return!!p("token")&&(!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")))},f=function(e){var t;t="token","undefined"!==window&&d.a.remove(t,{expires:1}),function(e){"undefined"!==window&&localStorage.removeItem(e)}("user"),e()},g=Object(u.g)((function(e){var t=e.children,a=e.match,c=e.history,o=function(e){return a.path===e?{color:"#000"}:{color:"#fff"}};return r.a.createElement(n.Fragment,null,r.a.createElement("ul",{className:"nav nav-tabs bg-primary"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/",className:"nav-link",style:o("/")},"Home")),!E()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/signin",className:"nav-link",style:o("/signin")},"Signin")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/signup",className:"nav-link",style:o("/signup")},"Signup"))),E()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/dashboard",className:"nav-link",style:o("/dashboard")},"Dashboard")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"nav-link",style:{cursor:"pointer",color:"#fff"},onClick:function(){f((function(){c.push("/")}))}},"Signout")))),r.a.createElement("div",{className:"container"},t))})),h=a(9);a(212);var O=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{className:"Home"},r.a.createElement("h1",null,"Hello React")))},v=a(30),j=a(4),N=a(7),S=function(){var e=Object(n.useState)({name:"",email:"",password:"",buttonText:"Submit"}),t=Object(h.a)(e,2),a=t[0],c=t[1],o=a.buttonText,l=a.name,m=a.email,u=a.password,i=function(e){c(Object(j.a)(Object(j.a)({},a),{},Object(v.a)({},e.target.name,e.target.value)))},d=function(e){e.preventDefault(),c(Object(j.a)(Object(j.a)({},a),{},{buttonText:"Submitting..."})),s.a.post("/signup",{name:l,email:m,password:u}).then((function(e){console.log("SIGNED UP SUCCESS!!",e),c({name:"",password:"",email:"",buttonText:"Submit"}),N.b.success(e.data.message)})).catch((function(e){e&&e.response&&e.response.data&&N.b.error(e.response.data.error)}))};return r.a.createElement(g,null,r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(N.a,null),r.a.createElement("h1",{className:"p-5 text-center"},"Sign up"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:i,name:"name",value:l,type:"text",className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:i,name:"email",type:"email",value:m,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:i,name:"password",type:"password",value:u,className:"form-control"})),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:d},o)))))},w=function(e){var t=e.history,a=Object(n.useState)({email:"",password:"",buttonText:"Submit"}),c=Object(h.a)(a,2),o=c[0],l=c[1],u=o.buttonText,i=o.email,d=o.password,p=function(e){l(Object(j.a)(Object(j.a)({},o),{},Object(v.a)({},e.target.name,e.target.value)))},f=function(e){e.preventDefault(),l(Object(j.a)(Object(j.a)({},o),{},{buttonText:"Submitting..."})),s.a.post("/signin",{email:i,password:d}).then((function(e){console.log("SIGNED UP SUCCESS!!",e),b(e,(function(){l(Object(j.a)(Object(j.a)({},o),{},{name:"",email:"",password:"",buttonText:"Submitted"})),E()?t.push("/dashboard"):t.push("/signin")}))})).catch((function(e){e&&e.response&&e.response.data&&N.b.error(e.response.data.error),l(Object(j.a)(Object(j.a)({},o),{},{buttonText:"Submit"}))}))};return r.a.createElement(g,null,r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(N.a,null),r.a.createElement("h1",{className:"p-5 text-center"},"Signin"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:p,name:"email",type:"email",value:i,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:p,name:"password",type:"password",value:d,className:"form-control"})),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:f},u))),r.a.createElement("br",null),r.a.createElement(m.b,{to:"/auth/password/forgot",className:"btn btn-sm btn-outline-danger"},"Forgot Password")))},C=a(68),k=a.n(C),x=function(e){var t=e.match,a=Object(n.useState)({name:"",token:"",show:!0}),c=Object(h.a)(a,2),o=c[0],l=c[1];Object(n.useEffect)((function(){var e=t.params.token;if(e){var a=k.a.decode(e).name;l((function(t){return Object(j.a)(Object(j.a)({},t),{},{name:a,token:e})}))}}),[t.params.token]);var m=o.name,u=o.token,i=function(e){e.preventDefault(),s.a.post("/account-activation",{token:u}).then((function(e){console.log("ACCOUNT ACTIVATION",e),l(Object(j.a)(Object(j.a)({},o),{},{show:!1})),N.b.success(e.data.message)})).catch((function(e){console.log("ACCOUNT ACTIVATION ERROR",e.response.data.error),N.b.error(e.response.data.error)}))};return r.a.createElement(g,null,r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(N.a,null),r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",{className:"p-5"},"Hey ",m,", Ready to activate your account?"),r.a.createElement("button",{className:"btn btn-outline-primary",onClick:i},"Activate Account"))))},y="Request password reset link",T=function(e){e.history;var t=Object(n.useState)({email:"",buttonText:y}),a=Object(h.a)(t,2),c=a[0],o=a[1],l=c.email,m=c.buttonText,u=function(e){e.preventDefault(),o(Object(j.a)(Object(j.a)({},c),{},{buttonText:"Submitting"})),s.a.post("forgot-password",{email:l}).then((function(e){console.log("FORGOT PASSWORD SUCCESS",e),N.b.success(e.data.message),o(Object(j.a)(Object(j.a)({},c),{},{buttonText:y}))})).catch((function(e){console.log("FORGOT PASSWORD ERROR",e.response.data),N.b.error(e.response.data.error),o(Object(j.a)(Object(j.a)({},c),{},{buttonText:y}))}))};return r.a.createElement(g,null,r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(N.a,null),r.a.createElement("h1",{className:"p-5 text-center"},"Forgot password"),function(){return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:(e="email",function(t){o(Object(j.a)(Object(j.a)({},c),{},Object(v.a)({},e,t.target.value)))}),value:l,type:"email",className:"form-control"})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:u},m)));var e}()))},P=function(e){var t=e.match,a=Object(n.useState)({name:"",token:"",newPassword:"",buttonText:"Reset password"}),c=Object(h.a)(a,2),o=c[0],l=c[1];Object(n.useEffect)((function(){var e=t.params.token,a=k.a.decode(e).name;e&&l((function(t){return Object(j.a)(Object(j.a)({},t),{},{name:a,token:e})}))}),[t.params.token]);var m=o.name,u=o.token,i=o.newPassword,d=o.buttonText,p=function(e){l(Object(j.a)(Object(j.a)({},o),{},{newPassword:e.target.value}))},b=function(e){e.preventDefault(),l(Object(j.a)(Object(j.a)({},o),{},{buttonText:"Submitting"})),s.a.post("/reset-password",{newPassword:i,resetPasswordLink:u}).then((function(e){console.log("RESET PASSWORD SUCCESS",e),N.b.success(e.data.message),l(Object(j.a)(Object(j.a)({},o),{},{buttonText:"Done"}))})).catch((function(e){console.log("RESET PASSWORD ERROR",e.response.data),N.b.error(e.response.data.error),l(Object(j.a)(Object(j.a)({},o),{},{buttonText:"Reset password"}))}))};return r.a.createElement(g,null,r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(N.a,null),r.a.createElement("h1",{className:"p-5 text-center"},"Hey ",m,", Type your new password"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"New Password"),r.a.createElement("input",{onChange:p,value:i,type:"password",className:"form-control",placeholder:"Type new password",required:!0})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:b},d)))))},R=a(174),A=a.n(R),I=a(58),D=a.n(I),U=a(175),F=a.n(U),H=a(176),W=a.n(H),G=a(73),L=function(){var e=Object(n.useState)(),t=Object(h.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),l=Object(h.a)(o,2),m=l[0],u=l[1],i=Object(n.useState)(),d=Object(h.a)(i,2),p=d[0],b=d[1],E=Object(n.useState)(),f=Object(h.a)(E,2),g=f[0],O=f[1],v=Object(n.useState)(),j=Object(h.a)(v,2),S=j[0],w=j[1];return r.a.createElement(A.a,{style:{color:G.a}},r.a.createElement("legend",null,"New Post"),r.a.createElement(D.a,{placeholder:"Name",onChange:function(e){return c(e.target.value)}}),r.a.createElement(D.a,{placeholder:"Email",onChange:function(e){return u(e.target.value)}}),r.a.createElement(D.a,{placeholder:"PIN",onChange:function(e){return b(e.target.value)}}),r.a.createElement(D.a,{placeholder:"Product",onChange:function(e){return O(e.target.value)}}),r.a.createElement(F.a,{placeholder:"Address",onChange:function(e){return w(e.target.value)}}),r.a.createElement(W.a,{onClick:function(e){a&&m&&p&&g&&S&&(console.log(a+m+p+S+g),s.a.post("users/add-post",{name:a,email:m,pin:p,product:g,address:S}).then((function(e){N.b.success("Succesfully Created")})).catch((function(e){N.b.error("Error Occured")}))),e.preventDefault()},variant:"raised"},"Add Post"))},J=a(359),q=a(6),z=a(368),B=a(360),M=a(361),V=a(363),_=a(362),$=a(365),K=a(366),Q=a(364),X=a(76),Y=a(74),Z=a(178),ee=a.n(Z),te=a(179),ae=a.n(te),ne=a(180),re=a.n(ne),ce=a(177),oe=a.n(ce),le=Object(J.a)((function(e){return{root:{maxWidth:1e3,maxHeight:1e3},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Y.a[500]}}}));function se(e){var t=le(),a=r.a.useState(!1),n=Object(h.a)(a,2),c=n[0],o=n[1];return r.a.createElement(z.a,{className:t.root},r.a.createElement(B.a,{avatar:r.a.createElement(K.a,{"aria-label":"recipe",className:t.avatar}),action:r.a.createElement(Q.a,{"aria-label":"settings"},r.a.createElement(oe.a,null)),title:e.user.name}),r.a.createElement(M.a,{className:t.media,image:"2.jpg",title:"Paella dish"}),r.a.createElement(_.a,{disableSpacing:!0},r.a.createElement(Q.a,{onClick:function(){return e.updatelike(e.user._id)},"aria-label":"add to favorites"},r.a.createElement(ee.a,null),e.user.likes),r.a.createElement(Q.a,{"aria-label":"share"},r.a.createElement(ae.a,null)),r.a.createElement(Q.a,{className:Object(q.a)(t.expand,Object(v.a)({},t.expandOpen,c)),onClick:function(){o(!c)},"aria-expanded":c,"aria-label":"show more"},r.a.createElement(re.a,null))),r.a.createElement($.a,{in:c,timeout:"auto",unmountOnExit:!0},r.a.createElement(V.a,null,r.a.createElement(X.a,{paragraph:!0},"Contact Information:"),r.a.createElement(X.a,{paragraph:!0},e.user.email),r.a.createElement(X.a,{paragraph:!0},"PIN ",e.user.pin),r.a.createElement(X.a,{paragraph:!0},"Address ",e.user.address),r.a.createElement(X.a,null,"Product name ",e.user.product),r.a.createElement(X.a,null,"Uploaded At: ",e.user.createdAt))))}var me=a(181),ue=a.n(me),ie=function(){var e=Object(n.useState)(!1),t=Object(h.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(h.a)(o,2),m=l[0],u=l[1],i=Object(n.useState)(),d=Object(h.a)(i,2),p=d[0],b=d[1],E=function(e){console.log("Calling Upi"),s.a.post("/users/update-like",{id:e}).then((function(e){console.log(e)})).catch((function(e){console.log("Error Occured"+e)})),f()},f=Object(n.useCallback)((function(){s.a.get("users/all-products").then((function(e){console.log("FETCH USERS SUCCESS!!",e),u(e.data.result)})).catch((function(e){e&&e.response&&e.response.data&&N.b.error(e.response.data.error)}))}),[]),O=Object(n.useCallback)((function(e){console.dir(e.target),b(e.target.files[0])}),[]),v=Object(n.useCallback)((function(e){console.log(p);var t=new FormData;t.append("myImage",p);s.a.post("files/image-upload",t,{heaaders:{"content-type":"multipart/form-data"}}).then((function(e){console.log("FETCH UPLOAD SUCCESS!!",e),u(e.data.result)})).catch((function(e){e&&e.response&&e.response.data&&N.b.error(e.response.data.error)}))}),[]);Object(n.useEffect)((function(){f()}),[f]);var j=a?r.a.createElement(L,null):null;return r.a.createElement(g,null,r.a.createElement(ue.a,{onClick:function(e){c(!a),e.preventDefault()},style:{fontSize:100}}),j,r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(N.a,null),r.a.createElement("ul",null,m.length?m.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(se,{updatelike:E,user:e}))})):r.a.createElement("li",null,"No users have signedup.")),r.a.createElement("button",{className:"btn btn-primary",onClick:f},"Make API Call"),r.a.createElement("form",null,r.a.createElement("input",{type:"file",name:"myImage",onChange:O}),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:v},"Upload"))))},de=a(71),pe=function(e){var t=e.component,a=Object(de.a)(e,["component"]);return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return E()?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/signin"})}}))},be=function(e){var t=e.component,a=e.restricted,n=Object(de.a)(e,["component","restricted"]);return r.a.createElement(u.b,Object.assign({},n,{render:function(e){return E()&&a?r.a.createElement(u.a,{to:"/dashboard"}):r.a.createElement(t,e)}}))},Ee=function(){return r.a.createElement(m.a,null,r.a.createElement(u.d,null,r.a.createElement(be,{path:"/",exact:!0,component:O}),r.a.createElement(be,{restricted:!0,path:"/signup",exact:!0,component:S}),r.a.createElement(be,{restricted:!0,path:"/signin",exact:!0,component:w}),r.a.createElement(be,{restricted:!0,path:"/auth/activate/:token",exact:!0,component:x}),r.a.createElement(be,{restricted:!0,path:"/auth/password/forgot",exact:!0,component:T}),r.a.createElement(be,{restricted:!0,path:"/auth/password/reset/:token",exact:!0,component:P}),r.a.createElement(pe,{path:"/dashboard",exact:!0,component:ie})))};s.a.defaults.baseURL="http://localhost:8000/api",s.a.interceptors.request.use((function(e){var t=p("token");return e.headers.Authorization=t,e})),s.a.interceptors.response.use(null,(function(e){return 401===e.response.status&&f((function(){window.location.href="/"})),Promise.reject(e)}));var fe=function(){return r.a.createElement(Ee,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(333);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[186,1,2]]]);
//# sourceMappingURL=main.9b4d5a2f.chunk.js.map